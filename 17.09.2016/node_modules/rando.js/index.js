
/**
 * rando.js
 */

 /**
  * Module Exports
  */

module.exports = rando;

function rando(list) {
  if (Array.isArray(list)) {
    return list[Math.floor(rando()*list.length)]
  }
  return Math.random();
}

/**
 * Binary random variable returns 0 or 1.
 */

rando.bin = function() {
  return Math.floor(2*rando());
}

/**
 * Boolean random variable return true or false.
 */

rando.bool = function() {
  return rando([true, false]);
};

/**
 * Exponential random variable.
 */

rando.exp = function() {
  return -Math.log(rando());
}

/**
 * Normal random variable
 */

rando.norm = function() {
  return Math.sqrt(-2*Math.log(rando()))*Math.cos(2*Math.PI*rando());
};

rando.norm2 = function() {
  return Math.pow(Math.sqrt(-2*Math.log(rando()))*Math.cos(2*Math.PI*rando()), 2);
}

/**
 * Timeout for a second using the exponential random variable.
 */

rando.timeout = function(next, wait, min, max) {
  if (!wait) wait = 1000;
  var id = setTimeout(next, rando.exp()*wait);
  if (max) {
    setInterval(function() {
      clearTimeout(id);
      next(new Error('Exceeded max time.'));
    }, max);
  }  
};

/**
 * Timeout for a second using the exponential random variable.
 */

rando.interval = function(next, wait, min, max) {
  if (!wait) wait = 1000;
  if (!min) min = 0;
  var id = setInterval(next, rando.exp()*wait + min);
  if (max) {
    setInterval(function() {
      clearInterval(id);
      next(new Error('Exceeded max time.'));
    }, max);
  }  
};

